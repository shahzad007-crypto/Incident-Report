<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formal Introduction Writing Practice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        .slide-container {
            min-height: 60vh;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .scenario-box {
            background-color: #e0f2fe; /* Light blue */
            border-left: 5px solid #3b82f6; /* Accent blue */
        }
        /* Applied 32px size and bold font weight to the scenario text */
        #scenario-text {
            font-size: 32px;
            font-weight: 700;
            line-height: 1.3; /* Adjusted line height for better readability at this size */
            color: #1f2937; /* Darker text color for contrast */
        }
        textarea {
            transition: all 0.2s;
            resize: vertical;
            min-height: 150px;
        }
        /* Custom buttons for a professional look */
        .btn-primary {
            background-color: #10b981;
            box-shadow: 0 4px #047857;
        }
        .btn-primary:hover {
            background-color: #047857;
        }
        .btn-secondary {
            background-color: #f59e0b;
            box-shadow: 0 4px #b45309;
        }
        .btn-secondary:hover {
            background-color: #b45309;
        }
    </style>
</head>
<body>

<div id="app" class="min-h-screen p-4 sm:p-10 flex items-start justify-center">
    <!-- Main Slide Container -->
    <div class="w-full max-w-5xl slide-container p-6 sm:p-10 transition-all duration-300">
        
        <h1 class="text-3xl font-extrabold text-gray-800 mb-2 border-b-4 border-yellow-400 pb-2">
            Formal Writing: Drafting Report Introductions
        </h1>
        <p class="text-gray-500 mb-8">
            Draft a professional introduction for the email or report. A good introduction must answer: **Who, What, Where, When, and Why** (the main purpose).
        </p>

        <!-- Slide Header -->
        <div class="flex justify-between items-center mb-6">
            <h2 id="slide-title" class="text-2xl font-bold text-blue-600"></h2>
            <span class="text-lg font-medium text-gray-600">Scenario <span id="current-index">1</span> of 5</span>
        </div>
        
        <!-- Scenario Box -->
        <div class="scenario-box p-5 rounded-lg mb-8">
            <h3 class="text-xl font-semibold text-gray-800 mb-3">Situation:</h3>
            <!-- Removed conflicting Tailwind classes to apply the 32px font size from the style block -->
            <p id="scenario-text" class="text-gray-700">
                <!-- Dynamic content will be inserted here -->
            </p>
            <p id="writing-task" class="mt-4 text-base italic text-gray-600">
                <!-- Dynamic task will be inserted here -->
            </p>
        </div>
        
        <!-- Student Input Area -->
        <div class="mb-8">
            <label for="student-introduction" class="block text-lg font-bold text-gray-700 mb-2">Your Introduction Draft:</label>
            <textarea id="student-introduction" class="w-full border-2 border-gray-300 p-4 rounded-lg focus:ring-4 focus:ring-blue-200 focus:border-blue-500 text-gray-800" placeholder="Dear [Recipient Name], I am writing to you..."></textarea>
        </div>

        <!-- Feedback & Sample Introduction (Initially Hidden) -->
        <div id="feedback-area" class="mt-6 p-4 rounded-lg hidden">
            <h3 class="text-xl font-bold mb-3" id="feedback-title"></h3>
            <p id="feedback-message" class="mb-4"></p>
            <div id="sample-area" class="bg-gray-100 p-4 rounded-md border border-gray-300">
                <p class="font-semibold text-gray-700">Sample Introduction:</p>
                <p id="sample-introduction" class="mt-1 text-gray-800 italic"></p>
            </div>
        </div>

        <!-- Navigation Controls -->
        <div class="mt-8 pt-6 border-t border-gray-200 flex justify-between gap-4">
            <button id="prev-button" onclick="prevSlide()" class="w-24 px-4 py-2 bg-gray-400 text-white font-bold rounded-lg hover:bg-gray-500 transition-colors duration-200 shadow-md disabled:opacity-50" disabled>
                Back
            </button>
            <button id="check-button" onclick="showFeedback()" class="flex-grow max-w-xs px-6 py-3 text-white font-bold rounded-lg transition-colors duration-200 shadow-xl btn-primary">
                Review Introduction
            </button>
            <button id="next-button" onclick="nextSlide()" class="w-24 px-4 py-2 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600 transition-colors duration-200 shadow-md disabled:opacity-50">
                Next
            </button>
        </div>
    </div>
</div>

<script>
    // --- ACTIVITY DATA (Simplified for Foundation Students) ---
    const scenarios = [
        {
            title: "1. Classroom Discipline Issue",
            scenario: "During the 10:00 AM Foundation English class on Sunday, September 15th, 2025, a student named Ahmed refused to stop talking on his phone. When the instructor asked him to leave, Ahmed shouted loudly at the teacher and quickly left the room. This caused the class to stop for 10 minutes.",
            task: "Write an introduction to an email addressed to the **Head of Department** reporting the student's misconduct.",
            sample: "Dear Head of Department, I am writing to formally report an incident of serious student misconduct that occurred during the Foundation English class on Sunday, September 15th, 2025, at 10:00 AM. The purpose of this email is to document the unacceptable verbal aggression and disruption caused by student Ahmed.",
        },
        {
            title: "2. Campus Slip and Fall",
            scenario: "At approximately 1:15 PM on Monday, October 21st, 2024, in the main corridor of the Business Studies building, a female student slipped and fell. The cause was a large puddle of water left unattended near the cleaning closet. The student sustained a minor bruise on her knee and was assisted by security staff.",
            task: "Write an introduction to an official **Incident Report** for the Campus Safety Officer.",
            sample: "This report is submitted to officially document a safety incident that happened on Monday, October 21st, 2024, at 1:15 PM, in the main corridor of the Business Studies building. The incident involved a student who sustained a minor injury after slipping on an unattended water spill. This report outlines the details and required safety follow-up.",
        },
        {
            title: "3. Lost Customer Package",
            scenario: "On Tuesday, November 5th, 2024, our local delivery driver, Mr. Khalid, realized that a high-priority package for a key client (Company Al Hilal) was missing from his truck. The last known location was the sorting depot at 8:00 AM. The package contained contract documents and its loss will cause a delay in the client’s project.",
            task: "Write an introduction to an email addressed to the **Logistics Manager** regarding the package loss.",
            sample: "Dear Logistics Manager, I am writing to report the critical loss of a high-priority delivery package intended for client Company Al Hilal. The loss was confirmed on Tuesday, November 5th, 2024, and is causing an immediate delay to the client’s contract. This email outlines the circumstances of the package disappearance from the delivery vehicle.",
        },
        {
            title: "4. Retail Customer Dispute",
            scenario: "At the main shopping counter in the electronics store on Thursday, December 12th, 2024, a customer became extremely angry with the sales assistant, Ms. Fatima. The customer was upset because he was charged the wrong price for a laptop advertised on sale. The dispute involved loud shouting and forced the store manager to intervene at 4:30 PM.",
            task: "Write an introduction to a **Staff Incident Report** for the Store Manager regarding the client's behavior.",
            sample: "This Staff Incident Report is intended to provide a formal account of a serious customer dispute that occurred on Thursday, December 12th, 2024, at 4:30 PM at the main electronics counter. The document records the aggressive behavior of a client over a pricing error and required immediate management intervention.",
        },
        {
            title: "5. Lab Equipment Failure",
            scenario: "Before the start of the Chemistry lab session on Sunday, January 19th, 2025, the instructor discovered that the main gas valve for the Bunsen burners in Lab 3 was not working. This equipment failure means that the practical experiment cannot proceed, forcing the cancellation of the class and wasting valuable teaching time.",
            task: "Write an introduction to a **Maintenance Request Email** for the Facilities/IT Support team.",
            sample: "Dear Facilities Team, I am writing to urgently request maintenance and repair for failed laboratory equipment in Chemistry Lab 3. This email is to report that the main gas valve for the Bunsen burners was discovered to be non-operational on Sunday, January 19th, 2025, leading to the cancellation of the scheduled practical class.",
        }
    ];

    let currentSlide = 0;

    const scenarioText = document.getElementById('scenario-text');
    const writingTask = document.getElementById('writing-task');
    const studentIntroduction = document.getElementById('student-introduction');
    const slideTitle = document.getElementById('slide-title');
    const currentIndex = document.getElementById('current-index');
    const prevButton = document.getElementById('prev-button');
    const nextButton = document.getElementById('next-button');
    const checkButton = document.getElementById('check-button');
    
    const feedbackArea = document.getElementById('feedback-area');
    const feedbackTitle = document.getElementById('feedback-title');
    const feedbackMessage = document.getElementById('feedback-message');
    const sampleIntroduction = document.getElementById('sample-introduction');

    function loadSlide(index) {
        if (index < 0 || index >= scenarios.length) return;

        currentSlide = index;
        const scenario = scenarios[currentSlide];

        // Update UI Text
        slideTitle.textContent = scenario.title;
        currentIndex.textContent = currentSlide + 1;
        scenarioText.textContent = scenario.scenario;
        writingTask.textContent = `Writing Task: ${scenario.task}`;
        
        // Reset input and feedback
        studentIntroduction.value = localStorage.getItem(`draft_${currentSlide}`) || "";
        feedbackArea.classList.add('hidden');
        
        // Update button states
        prevButton.disabled = currentSlide === 0;
        nextButton.disabled = currentSlide === scenarios.length - 1;

        // Change 'Next' button action if on the last slide
        if (currentSlide === scenarios.length - 1) {
            nextButton.textContent = 'Finish';
            // IMPORTANT: Replaced alert() with a console message/custom feedback for compliance.
            nextButton.onclick = () => {
                feedbackArea.classList.remove('hidden');
                feedbackTitle.textContent = "Activity Complete!";
                feedbackMessage.textContent = "You have completed all 5 scenarios. Use the 'Review Introduction' button to check your final draft.";
                feedbackArea.className = 'mt-6 p-4 rounded-lg bg-blue-100 border border-blue-400 text-blue-800';
            };
            nextButton.disabled = false; // Enable finish button
        } else {
            nextButton.textContent = 'Next';
            nextButton.onclick = nextSlide;
        }
    }

    function showFeedback() {
        const scenario = scenarios[currentSlide];
        const draft = studentIntroduction.value.trim();
        
        // Save the draft to local storage
        localStorage.setItem(`draft_${currentSlide}`, draft);

        feedbackTitle.textContent = "Review and Compare";
        feedbackArea.classList.remove('hidden');
        
        // Basic check for completeness (Who/What/When/Where/Why)
        const checkSummary = summarizeDraft(draft, scenario);
        feedbackMessage.innerHTML = `<span class="font-bold">Your Draft Analysis:</span><br>${checkSummary.message}`;
        feedbackArea.className = 'mt-6 p-4 rounded-lg';
        feedbackArea.classList.add(checkSummary.isGood ? 'bg-green-100 border border-green-400 text-green-800' : 'bg-red-100 border border-red-400 text-red-800');
        
        sampleIntroduction.textContent = scenario.sample;
    }

    function summarizeDraft(draft, scenario) {
        // Reduced minimum length for foundation students
        if (draft.length < 35) { 
            return {
                isGood: false,
                message: "Your introduction is too short. A strong introduction needs to clearly state **Who, What, Where, When, and Why** (purpose). Try to add more of these key details."
            };
        }

        let missingElements = [];
        
        // Check for Purpose/Document Type
        if (!draft.toLowerCase().includes('report') && !draft.toLowerCase().includes('email') && !draft.toLowerCase().includes('writing to')) {
            missingElements.push('Purpose (e.g., I am writing to report/This report documents)');
        }
        // Check for When (Date/Time) - checking for a year is a simple proxy
        if (!draft.includes('202') && !draft.includes('2025') && !draft.includes('2024')) { 
            missingElements.push('When (Date/Time)');
        }
        // Check for detail - checking for number of words
        if (draft.toLowerCase().split(' ').filter(w => w.length > 3).length < 7) { 
             missingElements.push('Detail (A short description of what happened)');
        }

        if (missingElements.length > 0) {
             return {
                isGood: false,
                message: `Your draft is missing key formal elements for a strong introduction: <ul>${missingElements.map(m => `<li>- ${m}</li>`).join('')}</ul> Read the situation again and make sure your introduction is more specific.`
            };
        }
        
        return {
            isGood: true,
            message: "Excellent! Your draft is clear and formal. Compare it to the sample below. Did you use clear and direct language to state the problem?"
        };
    }

    window.nextSlide = function() {
        if (currentSlide < scenarios.length - 1) {
            loadSlide(currentSlide + 1);
        }
    }

    window.prevSlide = function() {
        if (currentSlide > 0) {
            loadSlide(currentSlide - 1);
        }
    }

    window.onload = () => {
        loadSlide(0);
        window.showFeedback = showFeedback;
        window.nextSlide = nextSlide;
        window.prevSlide = prevSlide;
    };
</script>

</body>
</html>
